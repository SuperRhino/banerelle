(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function (process){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

// resolves . and .. elements in a path array with directory names there
// must be no slashes, empty elements, or device names (c:\) in the array
// (so also no leading and trailing slashes - it does not distinguish
// relative and absolute paths)
function normalizeArray(parts, allowAboveRoot) {
  // if the path tries to go above the root, `up` ends up > 0
  var up = 0;
  for (var i = parts.length - 1; i >= 0; i--) {
    var last = parts[i];
    if (last === '.') {
      parts.splice(i, 1);
    } else if (last === '..') {
      parts.splice(i, 1);
      up++;
    } else if (up) {
      parts.splice(i, 1);
      up--;
    }
  }

  // if the path is allowed to go above the root, restore leading ..s
  if (allowAboveRoot) {
    for (; up--; up) {
      parts.unshift('..');
    }
  }

  return parts;
}

// Split a filename into [root, dir, basename, ext], unix version
// 'root' is just a slash, or nothing.
var splitPathRe =
    /^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;
var splitPath = function(filename) {
  return splitPathRe.exec(filename).slice(1);
};

// path.resolve([from ...], to)
// posix version
exports.resolve = function() {
  var resolvedPath = '',
      resolvedAbsolute = false;

  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {
    var path = (i >= 0) ? arguments[i] : process.cwd();

    // Skip empty and invalid entries
    if (typeof path !== 'string') {
      throw new TypeError('Arguments to path.resolve must be strings');
    } else if (!path) {
      continue;
    }

    resolvedPath = path + '/' + resolvedPath;
    resolvedAbsolute = path.charAt(0) === '/';
  }

  // At this point the path should be resolved to a full absolute path, but
  // handle relative paths to be safe (might happen when process.cwd() fails)

  // Normalize the path
  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {
    return !!p;
  }), !resolvedAbsolute).join('/');

  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';
};

// path.normalize(path)
// posix version
exports.normalize = function(path) {
  var isAbsolute = exports.isAbsolute(path),
      trailingSlash = substr(path, -1) === '/';

  // Normalize the path
  path = normalizeArray(filter(path.split('/'), function(p) {
    return !!p;
  }), !isAbsolute).join('/');

  if (!path && !isAbsolute) {
    path = '.';
  }
  if (path && trailingSlash) {
    path += '/';
  }

  return (isAbsolute ? '/' : '') + path;
};

// posix version
exports.isAbsolute = function(path) {
  return path.charAt(0) === '/';
};

// posix version
exports.join = function() {
  var paths = Array.prototype.slice.call(arguments, 0);
  return exports.normalize(filter(paths, function(p, index) {
    if (typeof p !== 'string') {
      throw new TypeError('Arguments to path.join must be strings');
    }
    return p;
  }).join('/'));
};


// path.relative(from, to)
// posix version
exports.relative = function(from, to) {
  from = exports.resolve(from).substr(1);
  to = exports.resolve(to).substr(1);

  function trim(arr) {
    var start = 0;
    for (; start < arr.length; start++) {
      if (arr[start] !== '') break;
    }

    var end = arr.length - 1;
    for (; end >= 0; end--) {
      if (arr[end] !== '') break;
    }

    if (start > end) return [];
    return arr.slice(start, end - start + 1);
  }

  var fromParts = trim(from.split('/'));
  var toParts = trim(to.split('/'));

  var length = Math.min(fromParts.length, toParts.length);
  var samePartsLength = length;
  for (var i = 0; i < length; i++) {
    if (fromParts[i] !== toParts[i]) {
      samePartsLength = i;
      break;
    }
  }

  var outputParts = [];
  for (var i = samePartsLength; i < fromParts.length; i++) {
    outputParts.push('..');
  }

  outputParts = outputParts.concat(toParts.slice(samePartsLength));

  return outputParts.join('/');
};

exports.sep = '/';
exports.delimiter = ':';

exports.dirname = function(path) {
  var result = splitPath(path),
      root = result[0],
      dir = result[1];

  if (!root && !dir) {
    // No dirname whatsoever
    return '.';
  }

  if (dir) {
    // It has a dirname, strip trailing slash
    dir = dir.substr(0, dir.length - 1);
  }

  return root + dir;
};


exports.basename = function(path, ext) {
  var f = splitPath(path)[2];
  // TODO: make this comparison case-insensitive on windows?
  if (ext && f.substr(-1 * ext.length) === ext) {
    f = f.substr(0, f.length - ext.length);
  }
  return f;
};


exports.extname = function(path) {
  return splitPath(path)[3];
};

function filter (xs, f) {
    if (xs.filter) return xs.filter(f);
    var res = [];
    for (var i = 0; i < xs.length; i++) {
        if (f(xs[i], i, xs)) res.push(xs[i]);
    }
    return res;
}

// String.prototype.substr - negative index don't work in IE8
var substr = 'ab'.substr(-1) === 'b'
    ? function (str, start, len) { return str.substr(start, len) }
    : function (str, start, len) {
        if (start < 0) start = str.length + start;
        return str.substr(start, len);
    }
;

}).call(this,require('_process'))

},{"_process":2}],2:[function(require,module,exports){
// shim for using process in browser

var process = module.exports = {};
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = setTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    clearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        setTimeout(drainQueue, 0);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

},{}],3:[function(require,module,exports){
/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */

"use strict";

/**
 * Constructs an enumeration with keys equal to their value.
 *
 * For example:
 *
 *   var COLORS = keyMirror({blue: null, red: null});
 *   var myColor = COLORS.blue;
 *   var isColorValid = !!COLORS[myColor];
 *
 * The last line could not be performed if the values of the generated enum were
 * not equal to their keys.
 *
 *   Input:  {key1: val1, key2: val2}
 *   Output: {key1: key1, key2: key2}
 *
 * @param {object} obj
 * @return {object}
 */
var keyMirror = function(obj) {
  var ret = {};
  var key;
  if (!(obj instanceof Object && !Array.isArray(obj))) {
    throw new Error('keyMirror(...): Argument must be an object.');
  }
  for (key in obj) {
    if (!obj.hasOwnProperty(key)) {
      continue;
    }
    ret[key] = key;
  }
  return ret;
};

module.exports = keyMirror;

},{}],4:[function(require,module,exports){
'use strict';var _createClass=(function(){function defineProperties(target,props){for(var i=0;i < props.length;i++) {var descriptor=props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if("value" in descriptor)descriptor.writable = true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();Object.defineProperty(exports,"__esModule",{value:true});var _ApiRequest=require('./ApiRequest');var _ApiRequest2=_interopRequireDefault(_ApiRequest);var _Constants=require('../Utils/Constants');function _interopRequireDefault(obj){return obj && obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var AccessToken=(function(){function AccessToken(){_classCallCheck(this,AccessToken);}_createClass(AccessToken,null,[{key:'get',value:function get(verify){if(typeof verify === 'undefined'){verify = false;}return new Promise(function(resolve,reject){if(AccessToken._accessToken){return resolve(AccessToken._accessToken);}var access_token=localStorage.getItem(_Constants.Config.Storage.ACCESS_TOKEN);if(access_token === null){AccessToken.clear();return reject(new Error({code:403,message:'Unauthorized'}));}AccessToken.set(access_token,true).then(resolve);});}},{key:'set',value:function set(access_token,dontUpdateStorage){AccessToken._accessToken = access_token;return new Promise(function(resolve,reject){if(!dontUpdateStorage){localStorage.setItem(_Constants.Config.Storage.ACCESS_TOKEN,access_token);}resolve(access_token);});}},{key:'clear',value:function clear(){AccessToken._accessToken = null;return localStorage.removeItem(_Constants.Config.Storage.ACCESS_TOKEN);}}]);return AccessToken;})();exports.default = AccessToken;

},{"../Utils/Constants":11,"./ApiRequest":5}],5:[function(require,module,exports){
'use strict';var _createClass=(function(){function defineProperties(target,props){for(var i=0;i < props.length;i++) {var descriptor=props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if("value" in descriptor)descriptor.writable = true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();Object.defineProperty(exports,"__esModule",{value:true});var _Utils=require('../Utils/Utils');var _Utils2=_interopRequireDefault(_Utils);var _Actions=require('../Utils/Actions');var _Actions2=_interopRequireDefault(_Actions);var _ApiUtils=require('./ApiUtils');var _ApiUtils2=_interopRequireDefault(_ApiUtils);var _AccessToken=require('./AccessToken');var _AccessToken2=_interopRequireDefault(_AccessToken);var _superagent=require('superagent');var _superagent2=_interopRequireDefault(_superagent);function _interopRequireDefault(obj){return obj && obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var ApiRequest=(function(){_createClass(ApiRequest,null,[{key:'updateNetworkIndicator',value:function updateNetworkIndicator(){var dir=arguments.length <= 0 || arguments[0] === undefined?'-':arguments[0];if(dir === '+'){ApiRequest.activeRequests++;}else {ApiRequest.activeRequests--;}if(ApiRequest.activeRequests <= 0){ApiRequest.activeRequests = 0;}else {}}},{key:'create',value:function create(method,endpoint){return new this(method,endpoint);}},{key:'createAnon',value:function createAnon(method,endpoint){var request=new this(method,endpoint);request.setAnonymous(true);return request;}},{key:'get',value:function get(endpoint){return new this('get',endpoint);}},{key:'post',value:function post(endpoint){return new this('post',endpoint);}},{key:'put',value:function put(endpoint){return new this('put',endpoint);}},{key:'delete',value:function _delete(endpoint){return new this('delete',endpoint);}}]);function ApiRequest(method,endpoint){_classCallCheck(this,ApiRequest);if(endpoint === undefined){endpoint = method;method = 'get';}else {method = method.toLowerCase();}if(endpoint.indexOf('?') !== -1){throw new Error('You must set query string data via the `query` function');}this.isAnonymous = false;this.handleErrors = true;this.ignoreNetworkError = false;this.url = _ApiUtils2.default.buildUrl(endpoint);this._setupRequest(method);}_createClass(ApiRequest,[{key:'setAnonymous',value:function setAnonymous(isAnonymous){this.isAnonymous = isAnonymous;return this;}},{key:'setHandleErrors',value:function setHandleErrors(handleErrors){this.handleErrors = handleErrors;return this;}},{key:'setIgnoreNetworkError',value:function setIgnoreNetworkError(ignoreNetworkError){this.ignoreNetworkError = ignoreNetworkError;return this;}},{key:'configure',value:function configure(callback){callback(this.request);return this;}},{key:'send',value:function send(callback,errCallback){var _this=this;if(this.isAnonymous){return this._sendIt(callback,errCallback);}_AccessToken2.default.get().then(function(token){_this.query({token:token});_this._sendIt(callback,errCallback);});}},{key:'data',value:function data(_data){this.requestBody = JSON.stringify(_data);return this;}},{key:'query',value:function query(data){this.queryData = Object.assign(this.queryData,data);return this;}},{key:'header',value:function header(_header,value){this.requestHeaders[_header] = value;return this;}},{key:'headers',value:function headers(_headers){this.requestHeaders = Object.assign(this.requestHeaders,_headers);return this;}},{key:'_setupRequest',value:function _setupRequest(method){this.requestMethod = !method?'get':method;this.requestHeaders = {'Accept':'application/json','Content-Type':'application/json'};this.queryData = {};this.requestBody = {};this.request = null;}},{key:'_sendIt',value:function _sendIt(callback,errCallback){var _this2=this;ApiRequest.updateNetworkIndicator('+');this.request = _superagent2.default[this.requestMethod](this.url);if(!_Utils2.default.isEmpty(this.queryData)){this.request.query(this.queryData);}if(!_Utils2.default.isEmpty(this.requestHeaders)){this.request.set(this.requestHeaders);}this.request.send(this.requestBody).end(function(err,res){ApiRequest.updateNetworkIndicator();if(res.ok){callback(res.body);}else if(res.unauthorized){console.log('¡Unauthorized Request!');}else {if(_this2.handleErrors){_ApiUtils2.default.handleError(res.body.error);}if(errCallback)errCallback(res.body.error);}});}}]);return ApiRequest;})();ApiRequest.activeRequests = 0;exports.default = ApiRequest;

},{"../Utils/Actions":10,"../Utils/Utils":14,"./AccessToken":4,"./ApiUtils":6,"superagent":"superagent"}],6:[function(require,module,exports){
'use strict';var _createClass=(function(){function defineProperties(target,props){for(var i=0;i < props.length;i++) {var descriptor=props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if("value" in descriptor)descriptor.writable = true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();Object.defineProperty(exports,"__esModule",{value:true});var _Utils=require('../Utils/Utils');var _Utils2=_interopRequireDefault(_Utils);var _Constants=require('../Utils/Constants');function _interopRequireDefault(obj){return obj && obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var DEFAULT_ERROR='There was a problem with your request';var ApiUtils=(function(){function ApiUtils(){_classCallCheck(this,ApiUtils);}_createClass(ApiUtils,null,[{key:'handleError',value:function handleError(err){console.warn(err);_Utils2.default.alertError(err.message || DEFAULT_ERROR);}},{key:'handleNetworkError',value:function handleNetworkError(err){console.warn(err);}},{key:'buildUrl',value:function buildUrl(endpoint){endpoint = _Utils2.default.trimChar(endpoint,'/');if(endpoint.indexOf(_Constants.Config.api_root) === -1){endpoint = _Constants.Config.api_root + endpoint;}return endpoint;}}]);return ApiUtils;})();exports.default = ApiUtils;

},{"../Utils/Constants":11,"../Utils/Utils":14}],7:[function(require,module,exports){
'use strict';var _createClass=(function(){function defineProperties(target,props){for(var i=0;i < props.length;i++) {var descriptor=props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if("value" in descriptor)descriptor.writable = true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();Object.defineProperty(exports,"__esModule",{value:true});var _react=require('react');var _react2=_interopRequireDefault(_react);var _Actions=require('../Utils/Actions');var _Actions2=_interopRequireDefault(_Actions);var _ApiRequest=require('../Api/ApiRequest');var _ApiRequest2=_interopRequireDefault(_ApiRequest);function _interopRequireDefault(obj){return obj && obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call && (typeof call === "object" || typeof call === "function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass !== "function" && superClass !== null){throw new TypeError("Super expression must either be null or a function, not " + typeof superClass);}subClass.prototype = Object.create(superClass && superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__ = superClass;}var LoginForm=(function(_React$Component){_inherits(LoginForm,_React$Component);function LoginForm(props){_classCallCheck(this,LoginForm);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(LoginForm).call(this,props));_this.state = {};_this.onSubmit = _this.onSubmit.bind(_this);return _this;}_createClass(LoginForm,[{key:'render',value:function render(){return _react2.default.createElement('form',{className:'navbar-form navbar-right',role:'form',onSubmit:this.onSubmit},_react2.default.createElement('div',{className:'form-group',style:styles.formField},_react2.default.createElement('input',{ref:'username',type:'text',placeholder:'username',className:'form-control'})),_react2.default.createElement('div',{className:'form-group',style:styles.formField},_react2.default.createElement('input',{ref:'password',type:'password',placeholder:'password',className:'form-control'})),_react2.default.createElement('button',{type:'submit',className:'btn btn-default'},'Sign in'));}},{key:'onSubmit',value:function onSubmit(e){e.preventDefault();var data={username:this.refs.username.value,password:this.refs.password.value};_Actions2.default.login(data);}}]);return LoginForm;})(_react2.default.Component);LoginForm.propTypes = {};LoginForm.defaultProps = {};exports.default = LoginForm;var styles={formField:{margin:3}};

},{"../Api/ApiRequest":5,"../Utils/Actions":10,"react":"react"}],8:[function(require,module,exports){
'use strict';var _createClass=(function(){function defineProperties(target,props){for(var i=0;i < props.length;i++) {var descriptor=props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if("value" in descriptor)descriptor.writable = true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();Object.defineProperty(exports,"__esModule",{value:true});var _react=require('react');var _react2=_interopRequireDefault(_react);var _Actions=require('../Utils/Actions');var _Actions2=_interopRequireDefault(_Actions);var _CurrentUser=require('../Stores/CurrentUser');var _CurrentUser2=_interopRequireDefault(_CurrentUser);var _LoginForm=require('./LoginForm');var _LoginForm2=_interopRequireDefault(_LoginForm);function _interopRequireDefault(obj){return obj && obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call && (typeof call === "object" || typeof call === "function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass !== "function" && superClass !== null){throw new TypeError("Super expression must either be null or a function, not " + typeof superClass);}subClass.prototype = Object.create(superClass && superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__ = superClass;}var UserNav=(function(_React$Component){_inherits(UserNav,_React$Component);function UserNav(props){_classCallCheck(this,UserNav);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(UserNav).call(this,props));_this.state = {loading:true,user:{}};return _this;}_createClass(UserNav,[{key:'componentWillMount',value:function componentWillMount(){var _this2=this;this.stopListening = _CurrentUser2.default.listen(this._onUserChange.bind(this));this.stopAuthListen = _Actions2.default.noauth.listen(function(){return _this2.setState({loading:false});});this.setState({user:_CurrentUser2.default.get()});}},{key:'componentWillUnmount',value:function componentWillUnmount(){this.stopListening();this.stopAuthListen();}},{key:'render',value:function render(){if(this.state.loading){return null;}if(!this.state.user.id){return _react2.default.createElement(_LoginForm2.default,null);}return _react2.default.createElement('div',{className:'navbar-right'},_react2.default.createElement('div',{style:styles.username},'Welcome, ',this.state.user.username,' ',_react2.default.createElement('a',{href:'#',onClick:this._onLogoutPress},'sign out')));}},{key:'_onLogoutPress',value:function _onLogoutPress(e){e.preventDefault();_Actions2.default.logout();}},{key:'_onUserChange',value:function _onUserChange(user){this.setState({user:user,loading:false});}}]);return UserNav;})(_react2.default.Component);UserNav.propTypes = {};UserNav.defaultProps = {};exports.default = UserNav;var styles={username:{margin:3,lineHeight:'44px',color:'white'}};

},{"../Stores/CurrentUser":9,"../Utils/Actions":10,"./LoginForm":7,"react":"react"}],9:[function(require,module,exports){
'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _reflux=require('reflux');var _reflux2=_interopRequireDefault(_reflux);var _Actions=require('../Utils/Actions');var _Actions2=_interopRequireDefault(_Actions);var _Constants=require('../Utils/Constants');var _ApiRequest=require('../Api/ApiRequest');var _ApiRequest2=_interopRequireDefault(_ApiRequest);var _ApiUtils=require('../Api/ApiUtils');var _ApiUtils2=_interopRequireDefault(_ApiUtils);var _AccessToken=require('../Api/AccessToken');var _AccessToken2=_interopRequireDefault(_AccessToken);function _interopRequireDefault(obj){return obj && obj.__esModule?obj:{default:obj};}var defaultUser={id:null,username:null,session_id:null};var currentUser=Object.assign({},defaultUser);exports.default = _reflux2.default.createStore({listenables:[_Actions2.default],init:function init(){},get:function get(){return currentUser;},update:function update(userUpdates){currentUser = Object.assign({},userUpdates);this.trigger(currentUser);},onLogin:function onLogin(creds){_ApiRequest2.default.post('/account/login').data(creds).setAnonymous(true).send(function(res){_AccessToken2.default.set(res.data.session_id).then(function(){return _Actions2.default.login.completed(res);});},_Actions2.default.login.failed);},onLoginCompleted:function onLoginCompleted(response){var user=response.data;this.update(user);},onLogout:function onLogout(){_ApiRequest2.default.post('/account/logout').setHandleErrors(false).setIgnoreNetworkError(true).send(_Actions2.default.logout.completed,_Actions2.default.logout.failed);this.update(defaultUser);},onLogoutCompleted:function onLogoutCompleted(){_AccessToken2.default.clear();},onLogoutFailed:function onLogoutFailed(){_AccessToken2.default.clear();},onLoadUser:function onLoadUser(){_ApiRequest2.default.get('/account').send(_Actions2.default.loadUser.completed,_Actions2.default.loadUser.failed);},onLoadUserCompleted:function onLoadUserCompleted(response){this.update(response.data);}});

},{"../Api/AccessToken":4,"../Api/ApiRequest":5,"../Api/ApiUtils":6,"../Utils/Actions":10,"../Utils/Constants":11,"reflux":"reflux"}],10:[function(require,module,exports){
'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _reflux=require('reflux');var _reflux2=_interopRequireDefault(_reflux);var _AccessToken=require('../Api/AccessToken');var _AccessToken2=_interopRequireDefault(_AccessToken);var _ApiRequest=require('../Api/ApiRequest');var _ApiRequest2=_interopRequireDefault(_ApiRequest);function _interopRequireDefault(obj){return obj && obj.__esModule?obj:{default:obj};}var Actions=_reflux2.default.createActions(["auth","unauth","noauth",{"login":{asyncResult:true}},{"logout":{asyncResult:true}},{"loadUser":{asyncResult:true}}]);Actions.auth.listen(function(){_AccessToken2.default.get(true).then(function(accessToken){return Actions.loadUser(accessToken);}).catch(function(){return Actions.noauth();});});exports.default = Actions;

},{"../Api/AccessToken":4,"../Api/ApiRequest":5,"reflux":"reflux"}],11:[function(require,module,exports){
'use strict';Object.defineProperty(exports,"__esModule",{value:true});var keyMirror=require('keyMirror');var ENV='dev';var isProd=true,apiVersion='v1',apiHost='http://banerelle.com/api',siteRoot='http://banerelle.com';switch(ENV){case 'dev':isProd = false;apiHost = 'http://dev.banerelle.com/api';siteRoot = 'http://dev.banerelle.com';break;}var Config=exports.Config = {ENV:ENV,api_root:apiHost + '/',site_root:siteRoot + '/',Storage:keyMirror({ACCESS_TOKEN:null})};

},{"keyMirror":3}],12:[function(require,module,exports){
'use strict';var _createClass=(function(){function defineProperties(target,props){for(var i=0;i < props.length;i++) {var descriptor=props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if("value" in descriptor)descriptor.writable = true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();Object.defineProperty(exports,"__esModule",{value:true});var _jquery=require('jquery');var _jquery2=_interopRequireDefault(_jquery);var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactDom=require('react-dom');var _reactDom2=_interopRequireDefault(_reactDom);var _Actions=require('../Utils/Actions');var _Actions2=_interopRequireDefault(_Actions);var _UserNav=require('../Components/UserNav');var _UserNav2=_interopRequireDefault(_UserNav);function _interopRequireDefault(obj){return obj && obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var Initialize=(function(){function Initialize(){_classCallCheck(this,Initialize);}_createClass(Initialize,null,[{key:'globals',value:function globals(){window.jQuery = _jquery2.default;}},{key:'bootstrap',value:function bootstrap(){require('bootstrap');}},{key:'onReady',value:function onReady(){document.getElementById('btnComingSoon').onclick = function(){if(ga)ga('send','event','buttons','click','stay tuned');console.log('send','event','buttons','click','stay tuned');return false;};_reactDom2.default.render(_react2.default.createElement(_UserNav2.default,null),document.getElementById('UserNav'));}},{key:'authUser',value:function authUser(){_Actions2.default.auth();}},{key:'onLoad',value:function onLoad(){Initialize.globals();Initialize.bootstrap();Initialize.onReady();Initialize.authUser();}}]);return Initialize;})();exports.default = Initialize;

},{"../Components/UserNav":8,"../Utils/Actions":10,"bootstrap":"bootstrap","jquery":"jquery","react":"react","react-dom":"react-dom"}],13:[function(require,module,exports){
'use strict';var _createClass=(function(){function defineProperties(target,props){for(var i=0;i < props.length;i++) {var descriptor=props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if("value" in descriptor)descriptor.writable = true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();Object.defineProperty(exports,"__esModule",{value:true});var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactDom=require('react-dom');var _reactDom2=_interopRequireDefault(_reactDom);var _path=require('path');var _path2=_interopRequireDefault(_path);var _Utils=require('../Utils/Utils');var _Utils2=_interopRequireDefault(_Utils);var _RsvpForm=require('../Views/RsvpForm');var _RsvpForm2=_interopRequireDefault(_RsvpForm);function _interopRequireDefault(obj){return obj && obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var Routes=(function(){function Routes(){_classCallCheck(this,Routes);}_createClass(Routes,null,[{key:'current',value:function current(pathname){var basename=_path2.default.basename(pathname) || Routes.homeRoute;var camelName=basename.replace(/-([a-z])/g,function(g){return g[1].toUpperCase();});if(typeof Routes[camelName] === 'function'){Routes[camelName]();}}},{key:'home',value:function home(){console.log('Home route');}},{key:'rsvp',value:function rsvp(){console.log('rsvp');_reactDom2.default.render(_react2.default.createElement(_RsvpForm2.default,null),document.getElementById('RsvpForm'));}}]);return Routes;})();Routes.homeRoute = 'home';exports.default = Routes;

},{"../Utils/Utils":14,"../Views/RsvpForm":15,"path":1,"react":"react","react-dom":"react-dom"}],14:[function(require,module,exports){
'use strict';var _createClass=(function(){function defineProperties(target,props){for(var i=0;i < props.length;i++) {var descriptor=props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if("value" in descriptor)descriptor.writable = true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();Object.defineProperty(exports,"__esModule",{value:true});var _Constants=require('./Constants');function _typeof(obj){return obj && typeof Symbol !== "undefined" && obj.constructor === Symbol?"symbol":typeof obj;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var Utils=(function(){function Utils(){_classCallCheck(this,Utils);}_createClass(Utils,null,[{key:'alertError',value:function alertError(message){alert(message);}},{key:'getJSONP',value:function getJSONP(url,callback){var ref=window.document.getElementsByTagName('script')[0];var script=window.document.createElement('script');script.src = url + (url.indexOf('?') + 1?'&':'?') + 'callback=' + callback;ref.parentNode.insertBefore(script,ref);script.onload = function(){this.remove();};}},{key:'quoteRegex',value:function quoteRegex(regex){return regex.replace(/([()[{*+.$^\\|?])/g,'\\$1');}},{key:'trimChar',value:function trimChar(str,chr){chr = Utils.quoteRegex(chr);return str.replace(new RegExp('^' + chr + '+|' + chr + '+$','g'),"");}},{key:'toQueryString',value:function toQueryString(obj,prefix){var str=[];for(var p in obj) {if(obj.hasOwnProperty(p)){var k=prefix?prefix + "[" + p + "]":p,v=obj[p];str.push((typeof v === 'undefined'?'undefined':_typeof(v)) == "object"?Utils.toQueryString(v,k):encodeURIComponent(k) + "=" + encodeURIComponent(v));}}return str.join("&");}},{key:'isEmpty',value:function isEmpty(obj){if(obj == null)return true;if(obj.length > 0)return false;if(obj.length === 0)return true;if(Object.getOwnPropertyNames(obj).length > 0)return false;return true;}}]);return Utils;})();exports.default = Utils;

},{"./Constants":11}],15:[function(require,module,exports){
"use strict";var _createClass=(function(){function defineProperties(target,props){for(var i=0;i < props.length;i++) {var descriptor=props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if("value" in descriptor)descriptor.writable = true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();Object.defineProperty(exports,"__esModule",{value:true});var _react=require("react");var _react2=_interopRequireDefault(_react);function _interopRequireDefault(obj){return obj && obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call && (typeof call === "object" || typeof call === "function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass !== "function" && superClass !== null){throw new TypeError("Super expression must either be null or a function, not " + typeof superClass);}subClass.prototype = Object.create(superClass && superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__ = superClass;}var RsvpForm=(function(_React$Component){_inherits(RsvpForm,_React$Component);function RsvpForm(props){_classCallCheck(this,RsvpForm);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(RsvpForm).call(this,props));_this.state = {};_this.onYes = _this.onYes.bind(_this);_this.onNope = _this.onNope.bind(_this);return _this;}_createClass(RsvpForm,[{key:"render",value:function render(){return _react2.default.createElement("div",{className:"row"},_react2.default.createElement("h1",null,"RSVP ",_react2.default.createElement("small",null,"Banerelle Wedding")),_react2.default.createElement("p",{className:"lead"},"We'd love for you to join us. Start by finding your name:"),_react2.default.createElement("form",{className:"",role:"form"},_react2.default.createElement("div",{className:"form-group has-success has-feedback"},_react2.default.createElement("input",{id:"inputLastName",className:"form-control input-lg",type:"text",placeholder:"Last name"}),_react2.default.createElement("span",{className:"glyphicon glyphicon-ok form-control-feedback","aria-hidden":"true"})),_react2.default.createElement("blockquote",null,_react2.default.createElement("p",null,"Pick Your Eats")),_react2.default.createElement("div",{className:"form-group"},_react2.default.createElement("div",{className:"radio"},_react2.default.createElement("label",null,_react2.default.createElement("input",{type:"radio",name:"foodOptions",id:"foodOptions1",value:"Burrito"}),"Breakfast Burrito")),_react2.default.createElement("div",{className:"radio"},_react2.default.createElement("label",null,_react2.default.createElement("input",{type:"radio",name:"foodOptions",id:"foodOptions2",value:"McMuffin"}),"Egg McMuffin"))),_react2.default.createElement("blockquote",null,_react2.default.createElement("p",null,"Guest")),_react2.default.createElement("div",{className:"form-group"},_react2.default.createElement("div",{className:"checkbox disabled"},_react2.default.createElement("label",null,_react2.default.createElement("input",{type:"checkbox",value:"+1",disabled:true}),"+1"))),_react2.default.createElement("button",{type:"submit",className:"btn btn-success",onClick:this.onYes},"YES"),_react2.default.createElement("button",{type:"button",className:"btn btn-danger",onClick:this.onNope},"Nope")));}},{key:"onYes",value:function onYes(e){e.preventDefault();console.log('onYes');}},{key:"onNope",value:function onNope(e){e.preventDefault();console.log('nope');}}]);return RsvpForm;})(_react2.default.Component);RsvpForm.propTypes = {};RsvpForm.defaultProps = {};exports.default = RsvpForm;

},{"react":"react"}],16:[function(require,module,exports){
'use strict';var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactDom=require('react-dom');var _reactDom2=_interopRequireDefault(_reactDom);var _Initialize=require('./Utils/Initialize');var _Initialize2=_interopRequireDefault(_Initialize);var _Routes=require('./Utils/Routes');var _Routes2=_interopRequireDefault(_Routes);function _interopRequireDefault(obj){return obj && obj.__esModule?obj:{default:obj};}_Initialize2.default.onLoad();_Routes2.default.current(window.location.pathname);

},{"./Utils/Initialize":12,"./Utils/Routes":13,"react":"react","react-dom":"react-dom"}]},{},[16])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvcGF0aC1icm93c2VyaWZ5L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy9rZXlNaXJyb3IvaW5kZXguanMiLCJyZXNvdXJjZXMvanMvQXBpL0FjY2Vzc1Rva2VuLmpzIiwicmVzb3VyY2VzL2pzL0FwaS9BcGlSZXF1ZXN0LmpzIiwicmVzb3VyY2VzL2pzL0FwaS9BcGlVdGlscy5qcyIsInJlc291cmNlcy9qcy9Db21wb25lbnRzL0xvZ2luRm9ybS5qcyIsInJlc291cmNlcy9qcy9Db21wb25lbnRzL1VzZXJOYXYuanMiLCJyZXNvdXJjZXMvanMvU3RvcmVzL0N1cnJlbnRVc2VyLmpzIiwicmVzb3VyY2VzL2pzL1V0aWxzL0FjdGlvbnMuanMiLCJyZXNvdXJjZXMvanMvVXRpbHMvQ29uc3RhbnRzLmpzIiwicmVzb3VyY2VzL2pzL1V0aWxzL0luaXRpYWxpemUuanMiLCJyZXNvdXJjZXMvanMvVXRpbHMvUm91dGVzLmpzIiwicmVzb3VyY2VzL2pzL1V0aWxzL1V0aWxzLmpzIiwicmVzb3VyY2VzL2pzL1ZpZXdzL1JzdnBGb3JtLmpzIiwicmVzb3VyY2VzL2pzL21haW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QkFFeEUsQ0FDTixDQUNKLENBQ04sZ0RBQ0ksK0NBQVksQ0FDSCxDQUNiLHFDQUFLLFNBQVMsQ0FBQyxZQUFZLEVBQ3ZCLHFDQUFLLFNBQVMsQ0FBQyxtQkFBbUIsRUFDOUIsMkNBQ0ksdUNBQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVEsS0FBQSxFQUFHLE1BRXpDLENBQ04sQ0FDSixDQUNOLHdDQUFRLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLGlCQUFpQixDQUFDLE9BQU8sQ0FBRSxJQUFJLENBQUMsS0FBSyxBQUFDLFFBQWEsQ0FDbkYsd0NBQVEsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFFLElBQUksQ0FBQyxNQUFNLEFBQUMsU0FBYyxDQUNqRixDQUNMLENBQ04sQ0FDSCxvQ0FFSyxDQUFDLENBQUUsQ0FDUCxDQUFDLENBQUMsY0FBYyxFQUFFLENBQUMsQUFDbkIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUN0QixzQ0FFTSxDQUFDLENBQUUsQ0FDUixDQUFDLENBQUMsY0FBYyxFQUFFLENBQUMsQUFDbkIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUNyQixXQXBFa0IsUUFBUSxJQUFTLGdCQUFNLFNBQVMsRUFBaEMsUUFBUSxDQUNwQixTQUFTLEdBQUcsRUFBRSxDQURGLFFBQVEsQ0FFcEIsWUFBWSxHQUFHLEVBQUUsbUJBRkwsUUFBUTs7O21iQ0s3QixxQkFBVyxNQUFNLEVBQUUsQ0FBQyxBQUdwQixpQkFBTyxPQUFPLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuLy8gcmVzb2x2ZXMgLiBhbmQgLi4gZWxlbWVudHMgaW4gYSBwYXRoIGFycmF5IHdpdGggZGlyZWN0b3J5IG5hbWVzIHRoZXJlXG4vLyBtdXN0IGJlIG5vIHNsYXNoZXMsIGVtcHR5IGVsZW1lbnRzLCBvciBkZXZpY2UgbmFtZXMgKGM6XFwpIGluIHRoZSBhcnJheVxuLy8gKHNvIGFsc28gbm8gbGVhZGluZyBhbmQgdHJhaWxpbmcgc2xhc2hlcyAtIGl0IGRvZXMgbm90IGRpc3Rpbmd1aXNoXG4vLyByZWxhdGl2ZSBhbmQgYWJzb2x1dGUgcGF0aHMpXG5mdW5jdGlvbiBub3JtYWxpemVBcnJheShwYXJ0cywgYWxsb3dBYm92ZVJvb3QpIHtcbiAgLy8gaWYgdGhlIHBhdGggdHJpZXMgdG8gZ28gYWJvdmUgdGhlIHJvb3QsIGB1cGAgZW5kcyB1cCA+IDBcbiAgdmFyIHVwID0gMDtcbiAgZm9yICh2YXIgaSA9IHBhcnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgdmFyIGxhc3QgPSBwYXJ0c1tpXTtcbiAgICBpZiAobGFzdCA9PT0gJy4nKSB7XG4gICAgICBwYXJ0cy5zcGxpY2UoaSwgMSk7XG4gICAgfSBlbHNlIGlmIChsYXN0ID09PSAnLi4nKSB7XG4gICAgICBwYXJ0cy5zcGxpY2UoaSwgMSk7XG4gICAgICB1cCsrO1xuICAgIH0gZWxzZSBpZiAodXApIHtcbiAgICAgIHBhcnRzLnNwbGljZShpLCAxKTtcbiAgICAgIHVwLS07XG4gICAgfVxuICB9XG5cbiAgLy8gaWYgdGhlIHBhdGggaXMgYWxsb3dlZCB0byBnbyBhYm92ZSB0aGUgcm9vdCwgcmVzdG9yZSBsZWFkaW5nIC4uc1xuICBpZiAoYWxsb3dBYm92ZVJvb3QpIHtcbiAgICBmb3IgKDsgdXAtLTsgdXApIHtcbiAgICAgIHBhcnRzLnVuc2hpZnQoJy4uJyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHBhcnRzO1xufVxuXG4vLyBTcGxpdCBhIGZpbGVuYW1lIGludG8gW3Jvb3QsIGRpciwgYmFzZW5hbWUsIGV4dF0sIHVuaXggdmVyc2lvblxuLy8gJ3Jvb3QnIGlzIGp1c3QgYSBzbGFzaCwgb3Igbm90aGluZy5cbnZhciBzcGxpdFBhdGhSZSA9XG4gICAgL14oXFwvP3wpKFtcXHNcXFNdKj8pKCg/OlxcLnsxLDJ9fFteXFwvXSs/fCkoXFwuW14uXFwvXSp8KSkoPzpbXFwvXSopJC87XG52YXIgc3BsaXRQYXRoID0gZnVuY3Rpb24oZmlsZW5hbWUpIHtcbiAgcmV0dXJuIHNwbGl0UGF0aFJlLmV4ZWMoZmlsZW5hbWUpLnNsaWNlKDEpO1xufTtcblxuLy8gcGF0aC5yZXNvbHZlKFtmcm9tIC4uLl0sIHRvKVxuLy8gcG9zaXggdmVyc2lvblxuZXhwb3J0cy5yZXNvbHZlID0gZnVuY3Rpb24oKSB7XG4gIHZhciByZXNvbHZlZFBhdGggPSAnJyxcbiAgICAgIHJlc29sdmVkQWJzb2x1dGUgPSBmYWxzZTtcblxuICBmb3IgKHZhciBpID0gYXJndW1lbnRzLmxlbmd0aCAtIDE7IGkgPj0gLTEgJiYgIXJlc29sdmVkQWJzb2x1dGU7IGktLSkge1xuICAgIHZhciBwYXRoID0gKGkgPj0gMCkgPyBhcmd1bWVudHNbaV0gOiBwcm9jZXNzLmN3ZCgpO1xuXG4gICAgLy8gU2tpcCBlbXB0eSBhbmQgaW52YWxpZCBlbnRyaWVzXG4gICAgaWYgKHR5cGVvZiBwYXRoICE9PSAnc3RyaW5nJykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnRzIHRvIHBhdGgucmVzb2x2ZSBtdXN0IGJlIHN0cmluZ3MnKTtcbiAgICB9IGVsc2UgaWYgKCFwYXRoKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICByZXNvbHZlZFBhdGggPSBwYXRoICsgJy8nICsgcmVzb2x2ZWRQYXRoO1xuICAgIHJlc29sdmVkQWJzb2x1dGUgPSBwYXRoLmNoYXJBdCgwKSA9PT0gJy8nO1xuICB9XG5cbiAgLy8gQXQgdGhpcyBwb2ludCB0aGUgcGF0aCBzaG91bGQgYmUgcmVzb2x2ZWQgdG8gYSBmdWxsIGFic29sdXRlIHBhdGgsIGJ1dFxuICAvLyBoYW5kbGUgcmVsYXRpdmUgcGF0aHMgdG8gYmUgc2FmZSAobWlnaHQgaGFwcGVuIHdoZW4gcHJvY2Vzcy5jd2QoKSBmYWlscylcblxuICAvLyBOb3JtYWxpemUgdGhlIHBhdGhcbiAgcmVzb2x2ZWRQYXRoID0gbm9ybWFsaXplQXJyYXkoZmlsdGVyKHJlc29sdmVkUGF0aC5zcGxpdCgnLycpLCBmdW5jdGlvbihwKSB7XG4gICAgcmV0dXJuICEhcDtcbiAgfSksICFyZXNvbHZlZEFic29sdXRlKS5qb2luKCcvJyk7XG5cbiAgcmV0dXJuICgocmVzb2x2ZWRBYnNvbHV0ZSA/ICcvJyA6ICcnKSArIHJlc29sdmVkUGF0aCkgfHwgJy4nO1xufTtcblxuLy8gcGF0aC5ub3JtYWxpemUocGF0aClcbi8vIHBvc2l4IHZlcnNpb25cbmV4cG9ydHMubm9ybWFsaXplID0gZnVuY3Rpb24ocGF0aCkge1xuICB2YXIgaXNBYnNvbHV0ZSA9IGV4cG9ydHMuaXNBYnNvbHV0ZShwYXRoKSxcbiAgICAgIHRyYWlsaW5nU2xhc2ggPSBzdWJzdHIocGF0aCwgLTEpID09PSAnLyc7XG5cbiAgLy8gTm9ybWFsaXplIHRoZSBwYXRoXG4gIHBhdGggPSBub3JtYWxpemVBcnJheShmaWx0ZXIocGF0aC5zcGxpdCgnLycpLCBmdW5jdGlvbihwKSB7XG4gICAgcmV0dXJuICEhcDtcbiAgfSksICFpc0Fic29sdXRlKS5qb2luKCcvJyk7XG5cbiAgaWYgKCFwYXRoICYmICFpc0Fic29sdXRlKSB7XG4gICAgcGF0aCA9ICcuJztcbiAgfVxuICBpZiAocGF0aCAmJiB0cmFpbGluZ1NsYXNoKSB7XG4gICAgcGF0aCArPSAnLyc7XG4gIH1cblxuICByZXR1cm4gKGlzQWJzb2x1dGUgPyAnLycgOiAnJykgKyBwYXRoO1xufTtcblxuLy8gcG9zaXggdmVyc2lvblxuZXhwb3J0cy5pc0Fic29sdXRlID0gZnVuY3Rpb24ocGF0aCkge1xuICByZXR1cm4gcGF0aC5jaGFyQXQoMCkgPT09ICcvJztcbn07XG5cbi8vIHBvc2l4IHZlcnNpb25cbmV4cG9ydHMuam9pbiA9IGZ1bmN0aW9uKCkge1xuICB2YXIgcGF0aHMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuICByZXR1cm4gZXhwb3J0cy5ub3JtYWxpemUoZmlsdGVyKHBhdGhzLCBmdW5jdGlvbihwLCBpbmRleCkge1xuICAgIGlmICh0eXBlb2YgcCAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50cyB0byBwYXRoLmpvaW4gbXVzdCBiZSBzdHJpbmdzJyk7XG4gICAgfVxuICAgIHJldHVybiBwO1xuICB9KS5qb2luKCcvJykpO1xufTtcblxuXG4vLyBwYXRoLnJlbGF0aXZlKGZyb20sIHRvKVxuLy8gcG9zaXggdmVyc2lvblxuZXhwb3J0cy5yZWxhdGl2ZSA9IGZ1bmN0aW9uKGZyb20sIHRvKSB7XG4gIGZyb20gPSBleHBvcnRzLnJlc29sdmUoZnJvbSkuc3Vic3RyKDEpO1xuICB0byA9IGV4cG9ydHMucmVzb2x2ZSh0bykuc3Vic3RyKDEpO1xuXG4gIGZ1bmN0aW9uIHRyaW0oYXJyKSB7XG4gICAgdmFyIHN0YXJ0ID0gMDtcbiAgICBmb3IgKDsgc3RhcnQgPCBhcnIubGVuZ3RoOyBzdGFydCsrKSB7XG4gICAgICBpZiAoYXJyW3N0YXJ0XSAhPT0gJycpIGJyZWFrO1xuICAgIH1cblxuICAgIHZhciBlbmQgPSBhcnIubGVuZ3RoIC0gMTtcbiAgICBmb3IgKDsgZW5kID49IDA7IGVuZC0tKSB7XG4gICAgICBpZiAoYXJyW2VuZF0gIT09ICcnKSBicmVhaztcbiAgICB9XG5cbiAgICBpZiAoc3RhcnQgPiBlbmQpIHJldHVybiBbXTtcbiAgICByZXR1cm4gYXJyLnNsaWNlKHN0YXJ0LCBlbmQgLSBzdGFydCArIDEpO1xuICB9XG5cbiAgdmFyIGZyb21QYXJ0cyA9IHRyaW0oZnJvbS5zcGxpdCgnLycpKTtcbiAgdmFyIHRvUGFydHMgPSB0cmltKHRvLnNwbGl0KCcvJykpO1xuXG4gIHZhciBsZW5ndGggPSBNYXRoLm1pbihmcm9tUGFydHMubGVuZ3RoLCB0b1BhcnRzLmxlbmd0aCk7XG4gIHZhciBzYW1lUGFydHNMZW5ndGggPSBsZW5ndGg7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoZnJvbVBhcnRzW2ldICE9PSB0b1BhcnRzW2ldKSB7XG4gICAgICBzYW1lUGFydHNMZW5ndGggPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgdmFyIG91dHB1dFBhcnRzID0gW107XG4gIGZvciAodmFyIGkgPSBzYW1lUGFydHNMZW5ndGg7IGkgPCBmcm9tUGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICBvdXRwdXRQYXJ0cy5wdXNoKCcuLicpO1xuICB9XG5cbiAgb3V0cHV0UGFydHMgPSBvdXRwdXRQYXJ0cy5jb25jYXQodG9QYXJ0cy5zbGljZShzYW1lUGFydHNMZW5ndGgpKTtcblxuICByZXR1cm4gb3V0cHV0UGFydHMuam9pbignLycpO1xufTtcblxuZXhwb3J0cy5zZXAgPSAnLyc7XG5leHBvcnRzLmRlbGltaXRlciA9ICc6JztcblxuZXhwb3J0cy5kaXJuYW1lID0gZnVuY3Rpb24ocGF0aCkge1xuICB2YXIgcmVzdWx0ID0gc3BsaXRQYXRoKHBhdGgpLFxuICAgICAgcm9vdCA9IHJlc3VsdFswXSxcbiAgICAgIGRpciA9IHJlc3VsdFsxXTtcblxuICBpZiAoIXJvb3QgJiYgIWRpcikge1xuICAgIC8vIE5vIGRpcm5hbWUgd2hhdHNvZXZlclxuICAgIHJldHVybiAnLic7XG4gIH1cblxuICBpZiAoZGlyKSB7XG4gICAgLy8gSXQgaGFzIGEgZGlybmFtZSwgc3RyaXAgdHJhaWxpbmcgc2xhc2hcbiAgICBkaXIgPSBkaXIuc3Vic3RyKDAsIGRpci5sZW5ndGggLSAxKTtcbiAgfVxuXG4gIHJldHVybiByb290ICsgZGlyO1xufTtcblxuXG5leHBvcnRzLmJhc2VuYW1lID0gZnVuY3Rpb24ocGF0aCwgZXh0KSB7XG4gIHZhciBmID0gc3BsaXRQYXRoKHBhdGgpWzJdO1xuICAvLyBUT0RPOiBtYWtlIHRoaXMgY29tcGFyaXNvbiBjYXNlLWluc2Vuc2l0aXZlIG9uIHdpbmRvd3M/XG4gIGlmIChleHQgJiYgZi5zdWJzdHIoLTEgKiBleHQubGVuZ3RoKSA9PT0gZXh0KSB7XG4gICAgZiA9IGYuc3Vic3RyKDAsIGYubGVuZ3RoIC0gZXh0Lmxlbmd0aCk7XG4gIH1cbiAgcmV0dXJuIGY7XG59O1xuXG5cbmV4cG9ydHMuZXh0bmFtZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgcmV0dXJuIHNwbGl0UGF0aChwYXRoKVszXTtcbn07XG5cbmZ1bmN0aW9uIGZpbHRlciAoeHMsIGYpIHtcbiAgICBpZiAoeHMuZmlsdGVyKSByZXR1cm4geHMuZmlsdGVyKGYpO1xuICAgIHZhciByZXMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHhzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChmKHhzW2ldLCBpLCB4cykpIHJlcy5wdXNoKHhzW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cblxuLy8gU3RyaW5nLnByb3RvdHlwZS5zdWJzdHIgLSBuZWdhdGl2ZSBpbmRleCBkb24ndCB3b3JrIGluIElFOFxudmFyIHN1YnN0ciA9ICdhYicuc3Vic3RyKC0xKSA9PT0gJ2InXG4gICAgPyBmdW5jdGlvbiAoc3RyLCBzdGFydCwgbGVuKSB7IHJldHVybiBzdHIuc3Vic3RyKHN0YXJ0LCBsZW4pIH1cbiAgICA6IGZ1bmN0aW9uIChzdHIsIHN0YXJ0LCBsZW4pIHtcbiAgICAgICAgaWYgKHN0YXJ0IDwgMCkgc3RhcnQgPSBzdHIubGVuZ3RoICsgc3RhcnQ7XG4gICAgICAgIHJldHVybiBzdHIuc3Vic3RyKHN0YXJ0LCBsZW4pO1xuICAgIH1cbjtcbiIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxuXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBzZXRUaW1lb3V0KGRyYWluUXVldWUsIDApO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE0IEZhY2Vib29rLCBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKlxuICovXG5cblwidXNlIHN0cmljdFwiO1xuXG4vKipcbiAqIENvbnN0cnVjdHMgYW4gZW51bWVyYXRpb24gd2l0aCBrZXlzIGVxdWFsIHRvIHRoZWlyIHZhbHVlLlxuICpcbiAqIEZvciBleGFtcGxlOlxuICpcbiAqICAgdmFyIENPTE9SUyA9IGtleU1pcnJvcih7Ymx1ZTogbnVsbCwgcmVkOiBudWxsfSk7XG4gKiAgIHZhciBteUNvbG9yID0gQ09MT1JTLmJsdWU7XG4gKiAgIHZhciBpc0NvbG9yVmFsaWQgPSAhIUNPTE9SU1tteUNvbG9yXTtcbiAqXG4gKiBUaGUgbGFzdCBsaW5lIGNvdWxkIG5vdCBiZSBwZXJmb3JtZWQgaWYgdGhlIHZhbHVlcyBvZiB0aGUgZ2VuZXJhdGVkIGVudW0gd2VyZVxuICogbm90IGVxdWFsIHRvIHRoZWlyIGtleXMuXG4gKlxuICogICBJbnB1dDogIHtrZXkxOiB2YWwxLCBrZXkyOiB2YWwyfVxuICogICBPdXRwdXQ6IHtrZXkxOiBrZXkxLCBrZXkyOiBrZXkyfVxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBvYmpcbiAqIEByZXR1cm4ge29iamVjdH1cbiAqL1xudmFyIGtleU1pcnJvciA9IGZ1bmN0aW9uKG9iaikge1xuICB2YXIgcmV0ID0ge307XG4gIHZhciBrZXk7XG4gIGlmICghKG9iaiBpbnN0YW5jZW9mIE9iamVjdCAmJiAhQXJyYXkuaXNBcnJheShvYmopKSkge1xuICAgIHRocm93IG5ldyBFcnJvcigna2V5TWlycm9yKC4uLik6IEFyZ3VtZW50IG11c3QgYmUgYW4gb2JqZWN0LicpO1xuICB9XG4gIGZvciAoa2V5IGluIG9iaikge1xuICAgIGlmICghb2JqLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICByZXRba2V5XSA9IGtleTtcbiAgfVxuICByZXR1cm4gcmV0O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBrZXlNaXJyb3I7XG4iLCJpbXBvcnQgQXBpUmVxdWVzdCBmcm9tICcuL0FwaVJlcXVlc3QnO1xuaW1wb3J0IHtDb25maWd9IGZyb20gJy4uL1V0aWxzL0NvbnN0YW50cyc7XG5cbi8qKlxuICogQXBwbGljYXRpb24td2lkZSBhY2Nlc3NfdG9rZW4gc3RvcmFnZS9yZXRyaWV2YWxcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQWNjZXNzVG9rZW4ge1xuICAvKipcbiAgICogR2V0IHRoZSBBY2Nlc3NUb2tlbiBhbmQgbG9jYWxseSBjYWNoZSBpdCB0byBhdm9pZCB1bmVjY2Vzc2FyeSBmZXRjaGVzLlxuICAgKiBAcmV0dXJucyBQcm9taXNlXG4gICAqL1xuICBzdGF0aWMgZ2V0KHZlcmlmeSkge1xuICAgIGlmICh0eXBlb2YgdmVyaWZ5ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdmVyaWZ5ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGlmIChBY2Nlc3NUb2tlbi5fYWNjZXNzVG9rZW4pIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmUoQWNjZXNzVG9rZW4uX2FjY2Vzc1Rva2VuKTtcbiAgICAgIH1cblxuICAgICAgbGV0IGFjY2Vzc190b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKENvbmZpZy5TdG9yYWdlLkFDQ0VTU19UT0tFTik7XG5cbiAgICAgIGlmIChhY2Nlc3NfdG9rZW4gPT09IG51bGwpIHtcbiAgICAgICAgQWNjZXNzVG9rZW4uY2xlYXIoKTtcbiAgICAgICAgcmV0dXJuIHJlamVjdChuZXcgRXJyb3Ioe2NvZGU6IDQwMywgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCd9KSk7XG4gICAgICB9XG5cbiAgICAgIC8vIGlmICh2ZXJpZnkpIHtcbiAgICAgIC8vICAgQXBpUmVxdWVzdC5wb3N0KCcvc2Vzc2lvbi92ZXJpZnknKVxuICAgICAgLy8gICAgIC5zZXRIYW5kbGVFcnJvcnMoZmFsc2UpXG4gICAgICAvLyAgICAgLnNldElnbm9yZU5ldHdvcmtFcnJvcih0cnVlKVxuICAgICAgLy8gICAgIC5zZW5kKCgpID0+IHtcbiAgICAgIC8vICAgICAgIEFjY2Vzc1Rva2VuLnNldChhY2Nlc3NfdG9rZW4sIHRydWUpLnRoZW4ocmVzb2x2ZSk7XG4gICAgICAvLyAgICAgfSwgKGVycikgPT4ge1xuICAgICAgLy8gICAgICAgY29uc29sZS5sb2coJ1Rva2VuIFZlcmlmaWNhdGlvbiBFcnJvcjogJywgZXJyKTtcbiAgICAgIC8vICAgICAgIEFjY2Vzc1Rva2VuLmNsZWFyKCk7XG4gICAgICAvLyAgICAgICByZWplY3QoZXJyKTtcbiAgICAgIC8vICAgICB9KTtcbiAgICAgIC8vIH1cblxuICAgICAgQWNjZXNzVG9rZW4uc2V0KGFjY2Vzc190b2tlbiwgdHJ1ZSkudGhlbihyZXNvbHZlKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGFjY2Vzc190b2tlbiBpbiB0aGUgbG9jYWwgY2FjaGUsIGFuZCAoYnkgZGVmYXVsdCkgaW4gbG9jYWxTdG9yYWdlLlxuICAgKiBAcGFyYW0gYWNjZXNzX3Rva2VuXG4gICAqIEBwYXJhbSBkb250VXBkYXRlU3RvcmFnZVxuICAgKi9cbiAgc3RhdGljIHNldChhY2Nlc3NfdG9rZW4sIGRvbnRVcGRhdGVTdG9yYWdlKSB7XG4gICAgQWNjZXNzVG9rZW4uX2FjY2Vzc1Rva2VuID0gYWNjZXNzX3Rva2VuO1xuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGlmICghIGRvbnRVcGRhdGVTdG9yYWdlKSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKENvbmZpZy5TdG9yYWdlLkFDQ0VTU19UT0tFTiwgYWNjZXNzX3Rva2VuKTtcbiAgICAgIH1cblxuICAgICAgcmVzb2x2ZShhY2Nlc3NfdG9rZW4pO1xuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogQ2xlYXJzIHRoZSBhY2Nlc3NfdG9rZW4gZnJvbSBsb2NhbCBjYWNoZSBhbmQgbG9jYWxTdG9yYWdlXG4gICAqIEByZXR1cm5zIHsqfVxuICAgKi9cbiAgc3RhdGljIGNsZWFyKCkge1xuICAgIEFjY2Vzc1Rva2VuLl9hY2Nlc3NUb2tlbiA9IG51bGw7XG4gICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKENvbmZpZy5TdG9yYWdlLkFDQ0VTU19UT0tFTik7XG4gIH1cbn0iLCJpbXBvcnQgVXRpbHMgZnJvbSAnLi4vVXRpbHMvVXRpbHMnO1xuaW1wb3J0IEFjdGlvbnMgZnJvbSAnLi4vVXRpbHMvQWN0aW9ucyc7XG5pbXBvcnQgQXBpVXRpbHMgZnJvbSAnLi9BcGlVdGlscyc7XG5pbXBvcnQgQWNjZXNzVG9rZW4gZnJvbSAnLi9BY2Nlc3NUb2tlbic7XG5pbXBvcnQgUmVxdWVzdCBmcm9tICdzdXBlcmFnZW50JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpUmVxdWVzdCB7XG5cbiAgc3RhdGljIGFjdGl2ZVJlcXVlc3RzID0gMDtcblxuICBzdGF0aWMgdXBkYXRlTmV0d29ya0luZGljYXRvcihkaXIgPSAnLScpIHtcbiAgICBpZiAoZGlyID09PSAnKycpIHtcbiAgICAgIEFwaVJlcXVlc3QuYWN0aXZlUmVxdWVzdHMrKztcbiAgICB9IGVsc2Uge1xuICAgICAgQXBpUmVxdWVzdC5hY3RpdmVSZXF1ZXN0cy0tO1xuICAgIH1cblxuICAgIGlmIChBcGlSZXF1ZXN0LmFjdGl2ZVJlcXVlc3RzIDw9IDApIHtcbiAgICAgIEFwaVJlcXVlc3QuYWN0aXZlUmVxdWVzdHMgPSAwO1xuICAgICAgLy8gaGlkZSBuZXR3b3JrIGFjdGl2aXR5IGluZGljYXRvclxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBzaG93IG5ldHdvcmsgYWN0aXZpdHkgaW5kaWNhdG9yXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBBUEkgUmVxdWVzdCBPYmplY3RcbiAgICogQHBhcmFtIG1ldGhvZCB7c3RyaW5nfSBnZXR8cG9zdHxwdXR8ZGVsfGhlYWR8b3B0aW9ucyAob3B0aW9uYWwsIGRlZmF1bHQ6IGdldClcbiAgICogQHBhcmFtIGVuZHBvaW50IHtzdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgY3JlYXRlKG1ldGhvZCwgZW5kcG9pbnQpIHtcbiAgICByZXR1cm4gbmV3IHRoaXMobWV0aG9kLCBlbmRwb2ludCk7XG4gIH1cblxuICBzdGF0aWMgY3JlYXRlQW5vbihtZXRob2QsIGVuZHBvaW50KSB7XG4gICAgdmFyIHJlcXVlc3QgPSBuZXcgdGhpcyhtZXRob2QsIGVuZHBvaW50KTtcbiAgICByZXF1ZXN0LnNldEFub255bW91cyh0cnVlKTtcblxuICAgIHJldHVybiByZXF1ZXN0O1xuICB9XG5cbiAgc3RhdGljIGdldChlbmRwb2ludCkge1xuICAgIHJldHVybiBuZXcgdGhpcygnZ2V0JywgZW5kcG9pbnQpO1xuICB9XG5cbiAgc3RhdGljIHBvc3QoZW5kcG9pbnQpIHtcbiAgICByZXR1cm4gbmV3IHRoaXMoJ3Bvc3QnLCBlbmRwb2ludCk7XG4gIH1cblxuICBzdGF0aWMgcHV0KGVuZHBvaW50KSB7XG4gICAgcmV0dXJuIG5ldyB0aGlzKCdwdXQnLCBlbmRwb2ludCk7XG4gIH1cblxuICBzdGF0aWMgZGVsZXRlKGVuZHBvaW50KSB7XG4gICAgcmV0dXJuIG5ldyB0aGlzKCdkZWxldGUnLCBlbmRwb2ludCk7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihtZXRob2QsIGVuZHBvaW50KSB7XG4gICAgaWYgKGVuZHBvaW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGVuZHBvaW50ID0gbWV0aG9kO1xuICAgICAgbWV0aG9kID0gJ2dldCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1ldGhvZCA9IG1ldGhvZC50b0xvd2VyQ2FzZSgpO1xuICAgIH1cblxuICAgIGlmIChlbmRwb2ludC5pbmRleE9mKCc/JykgIT09IC0xKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBtdXN0IHNldCBxdWVyeSBzdHJpbmcgZGF0YSB2aWEgdGhlIGBxdWVyeWAgZnVuY3Rpb24nKTtcbiAgICB9XG5cbiAgICB0aGlzLmlzQW5vbnltb3VzID0gZmFsc2U7XG4gICAgdGhpcy5oYW5kbGVFcnJvcnMgPSB0cnVlO1xuICAgIHRoaXMuaWdub3JlTmV0d29ya0Vycm9yID0gZmFsc2U7XG4gICAgdGhpcy51cmwgPSBBcGlVdGlscy5idWlsZFVybChlbmRwb2ludCk7XG4gICAgdGhpcy5fc2V0dXBSZXF1ZXN0KG1ldGhvZCk7XG4gIH1cblxuICBzZXRBbm9ueW1vdXMoaXNBbm9ueW1vdXMpIHtcbiAgICB0aGlzLmlzQW5vbnltb3VzID0gaXNBbm9ueW1vdXM7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHNldEhhbmRsZUVycm9ycyhoYW5kbGVFcnJvcnMpIHtcbiAgICB0aGlzLmhhbmRsZUVycm9ycyA9IGhhbmRsZUVycm9ycztcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgc2V0SWdub3JlTmV0d29ya0Vycm9yKGlnbm9yZU5ldHdvcmtFcnJvcikge1xuICAgIHRoaXMuaWdub3JlTmV0d29ya0Vycm9yID0gaWdub3JlTmV0d29ya0Vycm9yO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBjb25maWd1cmUoY2FsbGJhY2spIHtcbiAgICBjYWxsYmFjayh0aGlzLnJlcXVlc3QpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBzZW5kKGNhbGxiYWNrLCBlcnJDYWxsYmFjaykge1xuICAgIGlmICh0aGlzLmlzQW5vbnltb3VzKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2VuZEl0KGNhbGxiYWNrLCBlcnJDYWxsYmFjayk7XG4gICAgfVxuXG4gICAgLy8gU2VuZCB3aXRoIHByb3BlciBhdXRoZW50aWNhdGlvbjpcbiAgICBBY2Nlc3NUb2tlbi5nZXQoKVxuICAgICAgLnRoZW4odG9rZW4gPT4ge1xuICAgICAgICB0aGlzLnF1ZXJ5KHt0b2tlbn0pO1xuICAgICAgICB0aGlzLl9zZW5kSXQoY2FsbGJhY2ssIGVyckNhbGxiYWNrKTtcbiAgICAgIH0pXG4gICAgICAvLyAuY2F0Y2goKCkgPT4gQWN0aW9ucy5sb2dvdXQoKSk7XG4gIH1cblxuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgKiBIZWxwZXIvV3JhcHBlciBGdW5jdGlvbnMgKlxuICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICBkYXRhKGRhdGEpIHtcbiAgICB0aGlzLnJlcXVlc3RCb2R5ID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHF1ZXJ5KGRhdGEpIHtcbiAgICB0aGlzLnF1ZXJ5RGF0YSA9IE9iamVjdC5hc3NpZ24odGhpcy5xdWVyeURhdGEsIGRhdGEpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBoZWFkZXIoaGVhZGVyLCB2YWx1ZSkge1xuICAgIHRoaXMucmVxdWVzdEhlYWRlcnNbaGVhZGVyXSA9IHZhbHVlO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBoZWFkZXJzKGhlYWRlcnMpIHtcbiAgICB0aGlzLnJlcXVlc3RIZWFkZXJzID0gT2JqZWN0LmFzc2lnbih0aGlzLnJlcXVlc3RIZWFkZXJzLCBoZWFkZXJzKVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBfc2V0dXBSZXF1ZXN0KG1ldGhvZCkge1xuICAgIHRoaXMucmVxdWVzdE1ldGhvZCA9ICghIG1ldGhvZCkgPyAnZ2V0JyA6IG1ldGhvZDtcbiAgICB0aGlzLnJlcXVlc3RIZWFkZXJzID0ge1xuICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgfTtcblxuICAgIHRoaXMucXVlcnlEYXRhID0ge307XG4gICAgdGhpcy5yZXF1ZXN0Qm9keSA9IHt9O1xuICAgIHRoaXMucmVxdWVzdCA9IG51bGw7XG4gIH1cblxuICBfc2VuZEl0KGNhbGxiYWNrLCBlcnJDYWxsYmFjaykge1xuICAgIEFwaVJlcXVlc3QudXBkYXRlTmV0d29ya0luZGljYXRvcignKycpO1xuXG4gICAgdGhpcy5yZXF1ZXN0ID0gUmVxdWVzdFt0aGlzLnJlcXVlc3RNZXRob2RdKHRoaXMudXJsKTtcblxuICAgIGlmICghIFV0aWxzLmlzRW1wdHkodGhpcy5xdWVyeURhdGEpKSB7XG4gICAgICB0aGlzLnJlcXVlc3QucXVlcnkodGhpcy5xdWVyeURhdGEpO1xuICAgIH1cblxuICAgIGlmICghIFV0aWxzLmlzRW1wdHkodGhpcy5yZXF1ZXN0SGVhZGVycykpIHtcbiAgICAgIHRoaXMucmVxdWVzdC5zZXQodGhpcy5yZXF1ZXN0SGVhZGVycyk7XG4gICAgfVxuXG4gICAgdGhpcy5yZXF1ZXN0XG4gICAgICAuc2VuZCh0aGlzLnJlcXVlc3RCb2R5KVxuICAgICAgLy8ud2l0aENyZWRlbnRpYWxzKClcbiAgICAgIC5lbmQoKGVyciwgcmVzKSA9PiB7XG4gICAgICAgIEFwaVJlcXVlc3QudXBkYXRlTmV0d29ya0luZGljYXRvcigpO1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgLy8gSSBrbm93IHdoZW4gdGhhdCBob3QgbGluZSBibGluZzpcbiAgICAgICAgICBjYWxsYmFjayhyZXMuYm9keSk7XG4gICAgICAgIH0gZWxzZSBpZiAocmVzLnVuYXV0aG9yaXplZCkge1xuICAgICAgICAgIC8vIFVuYXV0aG9yaXplZCByZXF1ZXN0OlxuICAgICAgICAgIGNvbnNvbGUubG9nKCfCoVVuYXV0aG9yaXplZCBSZXF1ZXN0IScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE5ldHdvcmsgcmVzcG9uc2Ugd2FzIG5vdCBPSzpcbiAgICAgICAgICBpZiAodGhpcy5oYW5kbGVFcnJvcnMpIHtcbiAgICAgICAgICAgIEFwaVV0aWxzLmhhbmRsZUVycm9yKHJlcy5ib2R5LmVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gQ2FsbCB0aGUgZXJyb3IgY2FsbGJhY2sgc28gdmlld3MgY2FuIHJlc3BvbmQ6XG4gICAgICAgICAgaWYgKGVyckNhbGxiYWNrKSBlcnJDYWxsYmFjayhyZXMuYm9keS5lcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG59IiwiaW1wb3J0IFV0aWxzIGZyb20gJy4uL1V0aWxzL1V0aWxzJztcbmltcG9ydCB7Q29uZmlnfSBmcm9tICcuLi9VdGlscy9Db25zdGFudHMnO1xuXG5jb25zdCBERUZBVUxUX0VSUk9SID0gJ1RoZXJlIHdhcyBhIHByb2JsZW0gd2l0aCB5b3VyIHJlcXVlc3QnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBcGlVdGlscyB7XG5cbiAgc3RhdGljIGhhbmRsZUVycm9yKGVycikge1xuICAgIGNvbnNvbGUud2FybihlcnIpO1xuICAgIFV0aWxzLmFsZXJ0RXJyb3IoZXJyLm1lc3NhZ2UgfHwgREVGQVVMVF9FUlJPUik7XG4gIH1cblxuICBzdGF0aWMgaGFuZGxlTmV0d29ya0Vycm9yKGVycikge1xuICAgIGNvbnNvbGUud2FybihlcnIpO1xuICAgIC8vIHNob3cgb2ZmbGluZSBtb2RlXG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIGVuZHBvaW50XG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgYnVpbGRVcmwoZW5kcG9pbnQpIHtcbiAgICAgIGVuZHBvaW50ID0gVXRpbHMudHJpbUNoYXIoZW5kcG9pbnQsICcvJyk7XG5cbiAgICAgIGlmIChlbmRwb2ludC5pbmRleE9mKENvbmZpZy5hcGlfcm9vdCkgPT09IC0xKSB7XG4gICAgICAgICAgZW5kcG9pbnQgPSBDb25maWcuYXBpX3Jvb3QgKyBlbmRwb2ludDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGVuZHBvaW50O1xuICB9XG5cbn0iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IEFjdGlvbnMgZnJvbSAnLi4vVXRpbHMvQWN0aW9ucyc7XG5pbXBvcnQgQXBpUmVxdWVzdCBmcm9tICcuLi9BcGkvQXBpUmVxdWVzdCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExvZ2luRm9ybSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7fTtcbiAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHt9O1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuXG4gICAgdGhpcy5zdGF0ZSA9IHt9O1xuXG4gICAgdGhpcy5vblN1Ym1pdCA9IHRoaXMub25TdWJtaXQuYmluZCh0aGlzKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGZvcm0gY2xhc3NOYW1lPVwibmF2YmFyLWZvcm0gbmF2YmFyLXJpZ2h0XCIgcm9sZT1cImZvcm1cIiBvblN1Ym1pdD17dGhpcy5vblN1Ym1pdH0+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9ybS1ncm91cFwiIHN0eWxlPXtzdHlsZXMuZm9ybUZpZWxkfT5cbiAgICAgICAgICA8aW5wdXQgcmVmPVwidXNlcm5hbWVcIiB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwidXNlcm5hbWVcIiBjbGFzc05hbWU9XCJmb3JtLWNvbnRyb2xcIiAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtLWdyb3VwXCIgc3R5bGU9e3N0eWxlcy5mb3JtRmllbGR9PlxuICAgICAgICAgIDxpbnB1dCByZWY9XCJwYXNzd29yZFwiIHR5cGU9XCJwYXNzd29yZFwiIHBsYWNlaG9sZGVyPVwicGFzc3dvcmRcIiBjbGFzc05hbWU9XCJmb3JtLWNvbnRyb2xcIiAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgY2xhc3NOYW1lPVwiYnRuIGJ0bi1kZWZhdWx0XCI+U2lnbiBpbjwvYnV0dG9uPlxuICAgICAgPC9mb3JtPlxuICAgICk7XG4gIH1cblxuICBvblN1Ym1pdChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciBkYXRhID0ge1xuICAgICAgdXNlcm5hbWU6IHRoaXMucmVmcy51c2VybmFtZS52YWx1ZSxcbiAgICAgIHBhc3N3b3JkOiB0aGlzLnJlZnMucGFzc3dvcmQudmFsdWUsXG4gICAgfTtcblxuICAgIEFjdGlvbnMubG9naW4oZGF0YSk7XG4gIH1cbn1cblxudmFyIHN0eWxlcyA9IHtcbiAgZm9ybUZpZWxkOiB7XG4gICAgbWFyZ2luOiAzLFxuICB9LFxufTsiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IEFjdGlvbnMgZnJvbSAnLi4vVXRpbHMvQWN0aW9ucyc7XG5pbXBvcnQgQ3VycmVudFVzZXIgZnJvbSAnLi4vU3RvcmVzL0N1cnJlbnRVc2VyJztcbmltcG9ydCBMb2dpbkZvcm0gZnJvbSAnLi9Mb2dpbkZvcm0nO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VyTmF2IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgc3RhdGljIHByb3BUeXBlcyA9IHt9O1xuICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge307XG5cbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG5cbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgbG9hZGluZzogdHJ1ZSxcbiAgICAgIHVzZXI6IHt9LFxuICAgIH07XG4gIH1cblxuICBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgdGhpcy5zdG9wTGlzdGVuaW5nID0gQ3VycmVudFVzZXIubGlzdGVuKHRoaXMuX29uVXNlckNoYW5nZS5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLnN0b3BBdXRoTGlzdGVuID0gQWN0aW9ucy5ub2F1dGgubGlzdGVuKCgpID0+IHRoaXMuc2V0U3RhdGUoe2xvYWRpbmc6IGZhbHNlfSkpO1xuXG4gICAgdGhpcy5zZXRTdGF0ZSh7dXNlcjogQ3VycmVudFVzZXIuZ2V0KCl9KTtcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHRoaXMuc3RvcExpc3RlbmluZygpO1xuICAgIHRoaXMuc3RvcEF1dGhMaXN0ZW4oKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5sb2FkaW5nKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoISB0aGlzLnN0YXRlLnVzZXIuaWQpIHtcbiAgICAgICAgcmV0dXJuIDxMb2dpbkZvcm0gLz47XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwibmF2YmFyLXJpZ2h0XCI+XG4gICAgICAgIDxkaXYgc3R5bGU9e3N0eWxlcy51c2VybmFtZX0+XG4gICAgICAgICAgV2VsY29tZSwge3RoaXMuc3RhdGUudXNlci51c2VybmFtZX1cbiAgICAgICAgICB7JyAnfVxuICAgICAgICAgIDxhIGhyZWY9XCIjXCIgb25DbGljaz17dGhpcy5fb25Mb2dvdXRQcmVzc30+c2lnbiBvdXQ8L2E+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIF9vbkxvZ291dFByZXNzKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgQWN0aW9ucy5sb2dvdXQoKTtcbiAgfVxuXG4gIF9vblVzZXJDaGFuZ2UodXNlcikge1xuICAgIHRoaXMuc2V0U3RhdGUoe3VzZXIsIGxvYWRpbmc6IGZhbHNlfSk7XG4gIH1cblxufVxuXG52YXIgc3R5bGVzID0ge1xuICB1c2VybmFtZToge1xuICAgIG1hcmdpbjogMyxcbiAgICBsaW5lSGVpZ2h0OiAnNDRweCcsXG4gICAgY29sb3I6ICd3aGl0ZScsXG4gIH0sXG59OyIsImltcG9ydCBSZWZsdXggZnJvbSAncmVmbHV4JztcblxuaW1wb3J0IEFjdGlvbnMgZnJvbSAnLi4vVXRpbHMvQWN0aW9ucyc7XG5pbXBvcnQge0NvbmZpZ30gZnJvbSAnLi4vVXRpbHMvQ29uc3RhbnRzJztcbmltcG9ydCBBcGlSZXF1ZXN0IGZyb20gJy4uL0FwaS9BcGlSZXF1ZXN0JztcbmltcG9ydCBBcGlVdGlscyBmcm9tICcuLi9BcGkvQXBpVXRpbHMnO1xuaW1wb3J0IEFjY2Vzc1Rva2VuIGZyb20gJy4uL0FwaS9BY2Nlc3NUb2tlbic7XG5cbmNvbnN0IGRlZmF1bHRVc2VyID0ge1xuICBpZDogbnVsbCxcbiAgdXNlcm5hbWU6IG51bGwsXG4gIHNlc3Npb25faWQ6IG51bGwsXG59O1xuXG4vLyBjb3B5IGRlZmF1bHRVc2VyIHRvIGN1cnJlbnRVc2VyXG5sZXQgY3VycmVudFVzZXIgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0VXNlcik7XG5cbmV4cG9ydCBkZWZhdWx0IFJlZmx1eC5jcmVhdGVTdG9yZSh7XG4gIC8vIHRoaXMgd2lsbCBzZXQgdXAgbGlzdGVuZXJzIHRvIGFsbCBwdWJsaXNoZXJzIGluIEFjdGlvbnMsIHVzaW5nIG9uS2V5bmFtZSAob3Iga2V5bmFtZSkgYXMgY2FsbGJhY2tzXG4gIGxpc3RlbmFibGVzOiBbQWN0aW9uc10sXG5cbiAgLy8gSW5pdGlhbCBzZXR1cFxuICBpbml0KCkge1xuICAgIC8vIG5vIG9wXG4gIH0sXG5cbiAgZ2V0KCkge1xuICAgIHJldHVybiBjdXJyZW50VXNlcjtcbiAgfSxcblxuICB1cGRhdGUodXNlclVwZGF0ZXMpIHtcbiAgICBjdXJyZW50VXNlciA9IE9iamVjdC5hc3NpZ24oe30sIHVzZXJVcGRhdGVzKTtcbiAgICB0aGlzLnRyaWdnZXIoY3VycmVudFVzZXIpO1xuICB9LFxuXG4gIC8vIFVzZXIgTG9naW46XG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgb25Mb2dpbihjcmVkcykge1xuICAgIEFwaVJlcXVlc3QucG9zdCgnL2FjY291bnQvbG9naW4nKVxuICAgICAgLmRhdGEoY3JlZHMpXG4gICAgICAuc2V0QW5vbnltb3VzKHRydWUpXG4gICAgICAuc2VuZChyZXMgPT4ge1xuICAgICAgICBBY2Nlc3NUb2tlbi5zZXQocmVzLmRhdGEuc2Vzc2lvbl9pZClcbiAgICAgICAgICAudGhlbigoKSA9PiBBY3Rpb25zLmxvZ2luLmNvbXBsZXRlZChyZXMpKTtcbiAgICAgIH0sIEFjdGlvbnMubG9naW4uZmFpbGVkKTtcbiAgfSxcbiAgb25Mb2dpbkNvbXBsZXRlZChyZXNwb25zZSkge1xuICAgIGxldCB1c2VyID0gcmVzcG9uc2UuZGF0YTtcbiAgICB0aGlzLnVwZGF0ZSh1c2VyKTtcbiAgfSxcblxuICAvLyBVc2VyIExvZ291dDpcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBvbkxvZ291dCgpIHtcbiAgICBBcGlSZXF1ZXN0LnBvc3QoJy9hY2NvdW50L2xvZ291dCcpXG4gICAgICAuc2V0SGFuZGxlRXJyb3JzKGZhbHNlKVxuICAgICAgLnNldElnbm9yZU5ldHdvcmtFcnJvcih0cnVlKVxuICAgICAgLnNlbmQoQWN0aW9ucy5sb2dvdXQuY29tcGxldGVkLCBBY3Rpb25zLmxvZ291dC5mYWlsZWQpO1xuXG4gICAgLy8gcmVzZXQgY3VycmVudFVzZXIgdG8gZGVmYXVsdFxuICAgIHRoaXMudXBkYXRlKGRlZmF1bHRVc2VyKTtcbiAgfSxcbiAgb25Mb2dvdXRDb21wbGV0ZWQoKSB7XG4gICAgQWNjZXNzVG9rZW4uY2xlYXIoKTtcbiAgfSxcbiAgb25Mb2dvdXRGYWlsZWQoKSB7XG4gICAgQWNjZXNzVG9rZW4uY2xlYXIoKTtcbiAgfSxcblxuICAvLyBMb2FkIFVzZXI6XG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgb25Mb2FkVXNlcigpIHtcbiAgICBBcGlSZXF1ZXN0LmdldCgnL2FjY291bnQnKVxuICAgICAgLnNlbmQoQWN0aW9ucy5sb2FkVXNlci5jb21wbGV0ZWQsIEFjdGlvbnMubG9hZFVzZXIuZmFpbGVkKTtcbiAgfSxcbiAgb25Mb2FkVXNlckNvbXBsZXRlZChyZXNwb25zZSkge1xuICAgIHRoaXMudXBkYXRlKHJlc3BvbnNlLmRhdGEpO1xuICB9LFxufSk7IiwiaW1wb3J0IFJlZmx1eCBmcm9tICdyZWZsdXgnO1xuaW1wb3J0IEFjY2Vzc1Rva2VuIGZyb20gJy4uL0FwaS9BY2Nlc3NUb2tlbic7XG5pbXBvcnQgQXBpUmVxdWVzdCBmcm9tICcuLi9BcGkvQXBpUmVxdWVzdCc7XG5cbi8vIEVhY2ggYWN0aW9uIGlzIGxpa2UgYW4gZXZlbnQgY2hhbm5lbCBmb3Igb25lIHNwZWNpZmljIGV2ZW50LiBBY3Rpb25zIGFyZSBjYWxsZWQgYnkgY29tcG9uZW50cy5cbi8vIFRoZSBzdG9yZSBpcyBsaXN0ZW5pbmcgdG8gYWxsIGFjdGlvbnMsIGFuZCB0aGUgY29tcG9uZW50cyBpbiB0dXJuIGFyZSBsaXN0ZW5pbmcgdG8gdGhlIHN0b3JlLlxuLy8gVGh1cyB0aGUgZmxvdyBpczogVXNlciBpbnRlcmFjdGlvbiAtPiBjb21wb25lbnQgY2FsbHMgYWN0aW9uIC0+IHN0b3JlIHJlYWN0cyBhbmQgdHJpZ2dlcnMgLT4gY29tcG9uZW50cyB1cGRhdGVcblxudmFyIEFjdGlvbnMgPSBSZWZsdXguY3JlYXRlQWN0aW9ucyhbXG4gIC8vIHVzZXIgYWN0aW9uc1xuICBcImF1dGhcIixcbiAgXCJ1bmF1dGhcIixcbiAgXCJub2F1dGhcIixcbiAge1wibG9naW5cIjoge2FzeW5jUmVzdWx0OiB0cnVlfX0sXG4gIHtcImxvZ291dFwiOiB7YXN5bmNSZXN1bHQ6IHRydWV9fSxcbiAge1wibG9hZFVzZXJcIjoge2FzeW5jUmVzdWx0OiB0cnVlfX0sXG5dKTtcblxuLyogVXNlciBBY3Rpb25zXG4gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG5BY3Rpb25zLmF1dGgubGlzdGVuKCgpID0+IHtcbiAgQWNjZXNzVG9rZW4uZ2V0KHRydWUpXG4gICAgLnRoZW4oYWNjZXNzVG9rZW4gPT4gQWN0aW9ucy5sb2FkVXNlcihhY2Nlc3NUb2tlbikpXG4gICAgLmNhdGNoKCgpID0+IEFjdGlvbnMubm9hdXRoKCkpO1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IEFjdGlvbnM7IiwidmFyIGtleU1pcnJvciA9IHJlcXVpcmUoJ2tleU1pcnJvcicpO1xuXG52YXIgRU5WID0gKFxuICAgICdkZXYnXG4gICAgLy8ncHJvZHVjdGlvbidcbik7XG5cbnZhciBpc1Byb2QgICAgID0gdHJ1ZSxcbiAgICBhcGlWZXJzaW9uID0gJ3YxJyxcbiAgICBhcGlIb3N0ICAgID0gJ2h0dHA6Ly9iYW5lcmVsbGUuY29tL2FwaScsXG4gICAgc2l0ZVJvb3QgICA9ICdodHRwOi8vYmFuZXJlbGxlLmNvbSc7XG5cbnN3aXRjaCAoRU5WKSB7XG4gICAgY2FzZSAnZGV2JzpcbiAgICAgICAgaXNQcm9kICAgPSBmYWxzZTtcbiAgICAgICAgYXBpSG9zdCAgPSAnaHR0cDovL2Rldi5iYW5lcmVsbGUuY29tL2FwaSc7XG4gICAgICAgIHNpdGVSb290ID0gJ2h0dHA6Ly9kZXYuYmFuZXJlbGxlLmNvbSc7XG4gICAgICAgIGJyZWFrO1xufVxuXG5leHBvcnQgdmFyIENvbmZpZyA9IHtcbiAgRU5WOiBFTlYsXG4gIGFwaV9yb290OiBhcGlIb3N0KycvJyxcbiAgc2l0ZV9yb290OiBzaXRlUm9vdCsnLycsXG5cbiAgU3RvcmFnZToga2V5TWlycm9yKHtcbiAgICBBQ0NFU1NfVE9LRU46IG51bGwsXG4gIH0pLFxufTtcbiIsImltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG5pbXBvcnQgQWN0aW9ucyBmcm9tICcuLi9VdGlscy9BY3Rpb25zJztcbmltcG9ydCBVc2VyTmF2IGZyb20gJy4uL0NvbXBvbmVudHMvVXNlck5hdic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEluaXRpYWxpemUge1xuXG4gIHN0YXRpYyBnbG9iYWxzKCkge1xuICAgIC8vIEV4cG9zZSBnbG9iYWxzIGxpa2UgalF1ZXJ5XG4gICAgd2luZG93LmpRdWVyeSA9ICQ7XG4gIH1cblxuICBzdGF0aWMgYm9vdHN0cmFwKCkge1xuICAgIHJlcXVpcmUoJ2Jvb3RzdHJhcCcpO1xuICB9XG5cbiAgc3RhdGljIG9uUmVhZHkoKSB7XG4gICAgLy8gQ2xpY2sgb24gYmlnIGJ1dHRvbjpcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuQ29taW5nU29vbicpLm9uY2xpY2sgPSBmdW5jdGlvbigpe1xuICAgICAgaWYgKGdhKSBnYSgnc2VuZCcsICdldmVudCcsICdidXR0b25zJywgJ2NsaWNrJywgJ3N0YXkgdHVuZWQnKTtcbiAgICAgIGNvbnNvbGUubG9nKCdzZW5kJywgJ2V2ZW50JywgJ2J1dHRvbnMnLCAnY2xpY2snLCAnc3RheSB0dW5lZCcpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICAvLyBTaG93IHRoYXQgbG9naW4gZm9ybTpcbiAgICBSZWFjdERPTS5yZW5kZXIoXG4gICAgICA8VXNlck5hdiAvPixcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdVc2VyTmF2JylcbiAgICApO1xuICB9XG5cbiAgc3RhdGljIGF1dGhVc2VyKCkge1xuICAgIEFjdGlvbnMuYXV0aCgpO1xuICB9XG5cbiAgc3RhdGljIG9uTG9hZCgpIHtcbiAgICBJbml0aWFsaXplLmdsb2JhbHMoKTtcbiAgICBJbml0aWFsaXplLmJvb3RzdHJhcCgpO1xuICAgIEluaXRpYWxpemUub25SZWFkeSgpO1xuICAgIEluaXRpYWxpemUuYXV0aFVzZXIoKTtcbiAgfVxufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgVXRpbHMgZnJvbSAnLi4vVXRpbHMvVXRpbHMnO1xuaW1wb3J0IFJzdnBGb3JtIGZyb20gJy4uL1ZpZXdzL1JzdnBGb3JtJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUm91dGVzIHtcblxuICBzdGF0aWMgaG9tZVJvdXRlID0gJ2hvbWUnO1xuXG4gIHN0YXRpYyBjdXJyZW50KHBhdGhuYW1lKSB7XG4gICAgdmFyIGJhc2VuYW1lID0gcGF0aC5iYXNlbmFtZShwYXRobmFtZSkgfHwgUm91dGVzLmhvbWVSb3V0ZTtcbiAgICB2YXIgY2FtZWxOYW1lID0gYmFzZW5hbWUucmVwbGFjZSgvLShbYS16XSkvZywgZnVuY3Rpb24gKGcpIHsgcmV0dXJuIGdbMV0udG9VcHBlckNhc2UoKTsgfSk7XG4gICAgaWYgKHR5cGVvZiBSb3V0ZXNbY2FtZWxOYW1lXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgUm91dGVzW2NhbWVsTmFtZV0oKTtcbiAgICB9XG4gIH1cblxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gQ3VzdG9tIFJvdXRlczpcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgc3RhdGljIGhvbWUoKSB7XG4gICAgY29uc29sZS5sb2coJ0hvbWUgcm91dGUnKTtcbiAgfVxuXG4gIHN0YXRpYyByc3ZwKCkge1xuICAgIGNvbnNvbGUubG9nKCdyc3ZwJyk7XG4gICAgUmVhY3RET00ucmVuZGVyKFxuICAgICAgPFJzdnBGb3JtIC8+LFxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ1JzdnBGb3JtJylcbiAgICApO1xuICB9XG5cbn1cbiIsImltcG9ydCB7IENvbmZpZywgfSBmcm9tICcuL0NvbnN0YW50cyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFV0aWxzIHtcblxuICBzdGF0aWMgYWxlcnRFcnJvcihtZXNzYWdlKSB7XG4gICAgYWxlcnQobWVzc2FnZSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IEpTT04gZGF0YSBmcm9tIGFub3RoZXIgc2VydmVyLiBTdXBwb3J0ZWQgYmFjayB0byBJRTYuXG4gICAqIGNyZWRpdDogaHR0cDovL2dvbWFrZXRoaW5ncy5jb20vZGl0Y2hpbmctanF1ZXJ5XG4gICAqIEBwYXJhbSB1cmxcbiAgICogQHBhcmFtIGNhbGxiYWNrXG4gICAqL1xuICBzdGF0aWMgZ2V0SlNPTlAodXJsLCBjYWxsYmFjaykge1xuXG4gICAgLy8gQ3JlYXRlIHNjcmlwdCB3aXRoIHVybCBhbmQgY2FsbGJhY2sgKGlmIHNwZWNpZmllZClcbiAgICB2YXIgcmVmID0gd2luZG93LmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCAnc2NyaXB0JyApWyAwIF07XG4gICAgdmFyIHNjcmlwdCA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnc2NyaXB0JyApO1xuICAgIHNjcmlwdC5zcmMgPSB1cmwgKyAodXJsLmluZGV4T2YoICc/JyApICsgMSA/ICcmJyA6ICc/JykgKyAnY2FsbGJhY2s9JyArIGNhbGxiYWNrO1xuXG4gICAgLy8gSW5zZXJ0IHNjcmlwdCB0YWcgaW50byB0aGUgRE9NIChhcHBlbmQgdG8gPGhlYWQ+KVxuICAgIHJlZi5wYXJlbnROb2RlLmluc2VydEJlZm9yZSggc2NyaXB0LCByZWYgKTtcblxuICAgIC8vIEFmdGVyIHRoZSBzY3JpcHQgaXMgbG9hZGVkIChhbmQgZXhlY3V0ZWQpLCByZW1vdmUgaXRcbiAgICBzY3JpcHQub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5yZW1vdmUoKTtcbiAgICB9O1xuXG4gIH1cblxuICAvKipcbiAgICogUXVvdGVzIHRoZSBnaXZlbiBzdHJpbmcgc28gaXQgY2FuIHNhZmVseSBiZSB1c2VkIGluIGEgUmVndWxhciBFeHByZXNzaW9uLlxuICAgKiBAcGFyYW0gcmVnZXhcbiAgICogQHJldHVybnMgeyp8c3RyaW5nfHZvaWR8WE1MfVxuICAgKi9cbiAgc3RhdGljIHF1b3RlUmVnZXgocmVnZXgpIHtcbiAgICAgIHJldHVybiByZWdleC5yZXBsYWNlKC8oWygpW3sqKy4kXlxcXFx8P10pL2csICdcXFxcJDEnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmltIHRoZSBnaXZlbiBjaGFyYWN0ZXIgZnJvbSBib3RoIGVuZHMgb2YgdGhlIGdpdmVuIHN0cmluZy5cbiAgICogQHBhcmFtIHN0clxuICAgKiBAcGFyYW0gY2hyXG4gICAqIEByZXR1cm5zIHsqfHN0cmluZ3x2b2lkfFhNTH1cbiAgICovXG4gIHN0YXRpYyB0cmltQ2hhcihzdHIsIGNocikge1xuICAgICAgY2hyID0gVXRpbHMucXVvdGVSZWdleChjaHIpO1xuICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKG5ldyBSZWdFeHAoJ14nICsgY2hyICsgJyt8JyArIGNociArICcrJCcsICdnJyksIFwiXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnQgYW4gb2JqZWN0IHRvIGEgcXVlcnkgc3RyaW5nLlxuICAgKiBjcmVkaXQ6IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzE3MTQ4OTlcbiAgICogQHBhcmFtIG9ialxuICAgKiBAcGFyYW0gcHJlZml4XG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgdG9RdWVyeVN0cmluZyhvYmosIHByZWZpeCkge1xuICAgIHZhciBzdHIgPSBbXTtcbiAgICBmb3IgKHZhciBwIGluIG9iaikge1xuICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShwKSkge1xuICAgICAgICB2YXIgayA9IHByZWZpeCA/IHByZWZpeCArIFwiW1wiICsgcCArIFwiXVwiIDogcCwgdiA9IG9ialtwXTtcbiAgICAgICAgc3RyLnB1c2godHlwZW9mIHYgPT0gXCJvYmplY3RcIiA/XG4gICAgICAgICAgVXRpbHMudG9RdWVyeVN0cmluZyh2LCBrKSA6IGVuY29kZVVSSUNvbXBvbmVudChrKSArIFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHYpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHN0ci5qb2luKFwiJlwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJcyBvYmplY3QgZW1wdHk/XG4gICAqIEBwYXJhbSAgb2JqXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuICBzdGF0aWMgaXNFbXB0eShvYmopIHtcbiAgICBpZiAob2JqID09IG51bGwpIHJldHVybiB0cnVlO1xuICAgIGlmIChvYmoubGVuZ3RoID4gMCkgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChvYmoubGVuZ3RoID09PSAwKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMob2JqKS5sZW5ndGggPiAwKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJzdnBGb3JtIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgc3RhdGljIHByb3BUeXBlcyA9IHt9O1xuICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge307XG5cbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG5cbiAgICB0aGlzLnN0YXRlID0ge307XG5cbiAgICB0aGlzLm9uWWVzID0gdGhpcy5vblllcy5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25Ob3BlID0gdGhpcy5vbk5vcGUuYmluZCh0aGlzKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICAvLyBhZGQgLmhhcy1zdWNjZXNzIG9yIC5oYXMtZXJyb3JcbiAgICAvLyAuZ2x5cGhpY29uLW9rIG9yIC5nbHlwaGljb24tcmVtb3ZlXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgICAgPGgxPlJTVlAgPHNtYWxsPkJhbmVyZWxsZSBXZWRkaW5nPC9zbWFsbD48L2gxPlxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImxlYWRcIj5XZSdkIGxvdmUgZm9yIHlvdSB0byBqb2luIHVzLiBTdGFydCBieSBmaW5kaW5nIHlvdXIgbmFtZTo8L3A+XG4gICAgICAgICAgPGZvcm0gY2xhc3NOYW1lPVwiXCIgcm9sZT1cImZvcm1cIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtLWdyb3VwIGhhcy1zdWNjZXNzIGhhcy1mZWVkYmFja1wiPlxuICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPVwiaW5wdXRMYXN0TmFtZVwiIGNsYXNzTmFtZT1cImZvcm0tY29udHJvbCBpbnB1dC1sZ1wiIHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCJMYXN0IG5hbWVcIiAvPlxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1vayBmb3JtLWNvbnRyb2wtZmVlZGJhY2tcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L3NwYW4+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8YmxvY2txdW90ZT5cbiAgICAgICAgICAgICAgICAgIDxwPlBpY2sgWW91ciBFYXRzPC9wPlxuICAgICAgICAgICAgICA8L2Jsb2NrcXVvdGU+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9ybS1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyYWRpb1wiPlxuICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJmb29kT3B0aW9uc1wiIGlkPVwiZm9vZE9wdGlvbnMxXCIgdmFsdWU9XCJCdXJyaXRvXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgQnJlYWtmYXN0IEJ1cnJpdG9cbiAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJhZGlvXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhZGlvXCIgbmFtZT1cImZvb2RPcHRpb25zXCIgaWQ9XCJmb29kT3B0aW9uczJcIiB2YWx1ZT1cIk1jTXVmZmluXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgRWdnIE1jTXVmZmluXG4gICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGJsb2NrcXVvdGU+XG4gICAgICAgICAgICAgICAgICA8cD5HdWVzdDwvcD5cbiAgICAgICAgICAgICAgPC9ibG9ja3F1b3RlPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2hlY2tib3ggZGlzYWJsZWRcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiB2YWx1ZT1cIisxXCIgZGlzYWJsZWQgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKzFcbiAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBjbGFzc05hbWU9XCJidG4gYnRuLXN1Y2Nlc3NcIiBvbkNsaWNrPXt0aGlzLm9uWWVzfT5ZRVM8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3NOYW1lPVwiYnRuIGJ0bi1kYW5nZXJcIiBvbkNsaWNrPXt0aGlzLm9uTm9wZX0+Tm9wZTwvYnV0dG9uPlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICBvblllcyhlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnNvbGUubG9nKCdvblllcycpO1xuICB9XG5cbiAgb25Ob3BlKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc29sZS5sb2coJ25vcGUnKTtcbiAgfVxufSIsIi8vIG1haW4uanNcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCBJbml0aWFsaXplIGZyb20gJy4vVXRpbHMvSW5pdGlhbGl6ZSc7XG5pbXBvcnQgUm91dGVzIGZyb20gJy4vVXRpbHMvUm91dGVzJztcblxuLy8gUnVuIHRoYXQgaW5pdDpcbkluaXRpYWxpemUub25Mb2FkKCk7XG5cbi8vIEluaXRpYWxpemUgY3VycmVudCByb3V0ZVxuUm91dGVzLmN1cnJlbnQod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lKTsiXX0=
